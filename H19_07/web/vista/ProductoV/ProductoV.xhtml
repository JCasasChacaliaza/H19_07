<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <title>Productos</title>

    </h:head>
    <h:body>
        <ui:composition template="./../Templete/plantila.xhtml">


            <ui:define name="content">
                <p:growl autoUpdate="true" showDetail="true"/>
                <center><h1>Registro de Productos</h1>
                    <h:form id="formIns">
                        <h:panelGrid columns="2">
                            <p:outputLabel value="Nombre Producto" />
                            <p:inputText value="#{productoC.productos.nomProc}"  maxlength="50" required="true" requiredMessage="Ingresa el nombre del Producto" />



                            <p:outputLabel value="Categoria"/>
                            <p:inputText value="#{productoC.productos.catProc}" required="true" requiredMessage="Ingresa la Categoria" />



                            <p:outputLabel value="Cantidad"/>
                            <p:inputText id="txt1" value="#{productoC.productos.cantProc}" required="true" requiredMessage="Ingresa la cantidad" >
                                <p:slider for="txt1" minValue="1" maxValue="1000" step="1"/>
                            </p:inputText>

                            <p:outputLabel value="Precio Unitario"/>
                            <p:inputNumber id="dec" symbol="S/" value="#{productoC.productos.preProc}" required="true" requiredMessage="Ingresa el Precio" >
                                <p:slider for="dec" minValue="0.2" maxValue="1000.0" step="0.1" />
                            </p:inputNumber>
                        </h:panelGrid>
                        <p:commandButton value="registrar" update="formIns :form" actionListener="#{productoC.ingresar()}"/>
                    </h:form>                       
                </center>

                <h:form id="form" >
                    <p:dataTable value="#{productoC.lisProduc}" id="dtTable" 
                                 var="lista" selection="#{productoC.productos}" 
                                 rowKey="#{lista.idProc}"
                                 paginator="true" selectionMode="single">

                        <p:column headerText="Nombre del Producto" >
                            <h:outputLabel value="#{lista.nomProc}"/>
                        </p:column>

                        <p:column headerText="Precio del Producto" >
                            <h:outputLabel value="#{lista.preProc}"/>
                        </p:column>

                        <p:column headerText="Categoria" >
                            <h:outputLabel value="#{lista.catProc}"/>
                        </p:column>

                        <p:column headerText="Cantidad ingresada" >
                            <h:outputLabel value="#{lista.cantProc}"/>
                        </p:column>
                        <p:column headerText="Fecha de ingreso" >
                            <h:outputLabel value="#{lista.fechIngProc}"/>
                        </p:column>                                                               
                    </p:dataTable>                                     
                    <p:contextMenu for="dtTable" >
                        <p:menuitem value="Modificar" update=":dlgDatos" oncomplete="PF('wdlgDatos').show();" />
                        <p:menuitem value="Eliminar" update="dtTable" actionListener="#{productoC.eliminar()}"  />                
                    </p:contextMenu>                        
                </h:form>


                <p:dialog id="dlgDatos" widgetVar="wdlgDatos" >
                    <h:form>
                        <h:panelGrid columns="2">
                            <p:outputLabel value="Nombre Producto" />
                            <p:inputText value="#{productoC.productos.nomProc}"  maxlength="50" required="true" requiredMessage="Ingresa el nombre del Producto" />

                            <p:outputLabel value="Categoria"/>
                            <p:inputText value="#{productoC.productos.catProc}" required="true" requiredMessage="Ingresa la Cateria" />

                            <p:outputLabel value="Cantidad"/>
                            <p:inputText id="txt1" value="#{productoC.productos.cantProc}" required="true" requiredMessage="Ingresa la Cantidad" >
                                <p:slider for="txt1" minValue="1" maxValue="1000" step="1"/>
                            </p:inputText>

                            <p:outputLabel value="Precio Unitario"/>
                            <p:inputNumber id="dec" symbol="S/" value="#{productoC.productos.preProc}" required="true" requiredMessage="Ingresa el Precio" >
                                <p:slider for="dec" minValue="0.2" maxValue="1000.0" step="0.1" />
                            </p:inputNumber>
                        </h:panelGrid>
                        <p:commandButton value="Modificar" actionListener="#{productoC.modificar()}" update=":form" oncomplete="PF('wdlgDatos').hide(); " />
                        <p:commandButton value="Cancelar" immediate="true" oncomplete="PF('wdlgDatos').hide();" />                
                    </h:form>
                </p:dialog>
            </ui:define>

        </ui:composition>
    </h:body>

</html>
