<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>

    </h:head>

    <h:body>
        <ui:composition template="./../Templete/plantila.xhtml">

            <ui:define name="titlePage">
                Sucursales
            </ui:define>

            <ui:define name="content">
                <p:growl autoUpdate="true"  />
                <h1>Registro de Sucursales</h1>
                <h:form id="formIns">
                    <p:panelGrid columns="2" >

                        <p:outputLabel value="Telefono"/>
                        <p:inputText value="#{sucursalC.sucursal.telSuc}" maxlength="8" required="true" requiredMessage="Ingrese el Telefono">
                            <p:keyFilter regEx="/[0-9]/"/>
                        </p:inputText>

                        <p:outputLabel value="Direción"/>
                        <p:inputText value="#{sucursalC.sucursal.dirSuc}" required="true" maxlength="50" requiredMessage="Ingrese ladirecció"/>

                        <p:outputLabel value="Ubicación"/>
                        <p:inputText value="#{sucursalC.sucursal.proSuc}" required="true" maxlength="50" requiredMessage="Ingrese la ubicación"/>

                    </p:panelGrid>     
                    <p:commandButton value="Registrar" actionListener="#{sucursalC.registrar()}" update="formIns :form" />            
                </h:form>  

                <h:form id="form" >
                    <p:dataTable value="#{sucursalC.lisSuc}" var="lista"
                                 rowKey="#{lista.idSuc}" selection="#{sucursalC.sucursal}"
                                 selectionMode="single"  id="dtTable">

                        <p:column headerText="Telefono" >
                            <p:outputLabel value="#{lista.telSuc}"  />                                        
                        </p:column>

                        <p:column headerText="Direccion" >
                            <p:outputLabel value="#{lista.dirSuc}"  />                                        
                        </p:column>
                        <p:column headerText="Lugar del Local" >
                            <p:outputLabel value="#{lista.proSuc}"  />                                        
                        </p:column>                                
                    </p:dataTable>
                    <p:contextMenu for="dtTable">
                        <p:menuitem value="Modificar" update=":dlgDatos" oncomplete="PF('wdlgDatos').show();" />
                        <p:menuitem value="Eliminar" update="dtTable" actionListener="#{sucursalC.eliminar()}"/>
                    </p:contextMenu>            
                </h:form>


                <p:dialog id="dlgDatos" widgetVar="wdlgDatos" >
                    <h:form>
                        <p:panelGrid columns="2" >

                            <p:outputLabel value="Telefono"/>
                            <p:inputText value="#{sucursalC.sucursal.telSuc}" maxlength="8" required="true" requiredMessage="Ingrese el Telefono">
                                <p:keyFilter regEx="/[0-9]/"/>
                            </p:inputText>

                            <p:outputLabel value="Direción"/>
                            <p:inputText value="#{sucursalC.sucursal.dirSuc}" maxlength="50" required="true" requiredMessage="Ingrese ladirecció"/>

                            <p:outputLabel value="Ubicación"/>
                            <p:inputText value="#{sucursalC.sucursal.proSuc}" required="true" maxlength="50" requiredMessage="Ingrese la ubicación"/>
                        </p:panelGrid>     
                        <p:commandButton value="Modificar" actionListener="#{sucursalC.modificar()}" update=":form" oncomplete="PF('wdlgDatos').hide();" />    
                        <p:commandButton value="Cancelar" immediate="true" oncomplete="PF('wdlgDatos').hide();" />    

                    </h:form>
                </p:dialog> 
            </ui:define>

        </ui:composition>
    </h:body>
</html>
